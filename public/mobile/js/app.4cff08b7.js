(function(e){function t(t){for(var a,s,o=t[0],c=t[1],l=t[2],d=0,h=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={app:0},r=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/mobile/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),i=n.n(a);i.a},"09c7":function(e,t,n){},"124a":function(e,t,n){},"1fc2":function(e,t,n){"use strict";var a=n("bfbb"),i=n.n(a);i.a},"4fa2":function(e,t,n){"use strict";var a=n("a2bd"),i=n.n(a);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("van-nav-bar",{staticStyle:{background:"#1f1731",color:"#ffffff","z-index":"1000"},attrs:{title:this.$route.name,fixed:"","left-arrow":this.$route.meta.allowBack},on:{"click-left":e.handleClickLeftNav},scopedSlots:e._u([{key:"right",fn:function(){return[e.allowHome?n("van-icon",{attrs:{name:"home-o",size:"18"},on:{click:e.handleClickRightNav}}):e._e()]},proxy:!0}])}),n("transition",[n("router-view")],1),n("van-image-preview",{attrs:{startPosition:e.imagePreviewStartIndex,images:e.imagePreviewImages.map((function(e){return e.url}))},on:{change:e.onChange},scopedSlots:e._u([{key:"cover",fn:function(){return[n("div",[n("p",[e._v("解说词:"+e._s(0===e.currentJoyeaDesc.length?"暂未设置":e.currentJoyeaDesc))])])]},proxy:!0}]),model:{value:e.showImagePreview,callback:function(t){e.showImagePreview=t},expression:"showImagePreview"}})],1)},r=[],s=(n("ac1f"),n("5319"),n("5530")),o=n("2f62"),c=n("bc3a"),l=n.n(c),u=l.a.create({baseURL:"/",timeout:36e5});function d(e){return u.post("api",e).then((function(e){return e.data}))}function h(e,t){return u.post("api/v1/user/login",{user:e,pwd:t}).then((function(e){return e.data}))}function m(){return u.post("api/v1/user/logout",{}).then((function(e){return e.data}))}function f(){return u.post("api/v1/user/check",{}).then((function(e){return e.data}))}function p(e,t,n,a,i,r,s,o,c){var l={curPage:e,pageSize:t,shared:n,sortType:a,hangyeTagId:i,xianbieTagId:r,jixingTagId:s,jieduanTagId:o,shichangTagId:c};return u.post("api/v1/album/pageList",l).then((function(e){return e.data}))}function v(){return u.post("api/v1/album/list/mine",{}).then((function(e){return e.data}))}function g(e,t,n,a,i,r,s,o,c,l,d){return u.post("api/v1/album/switch/share",{albumId:e,share:t,albumName:n,coverId:a,localCoverId:i,shareDesc:r,hangyeTagId:s,xianbieTagId:o,jixingTagId:c,jieduanTagId:l,shichangTagId:d}).then((function(e){return e.data}))}function b(e){return u.post("api/v1/album/copy",{albumId:e}).then((function(e){return e.data}))}function y(e,t,n,a,i,r,s,o){return u.post("/api/v1/upload/add",{tempSrcName:t,uploader:e,srcNeid:n,srcType:a,srcHash:i,srcRev:r,srcDesc:s,tags:o}).then((function(e){return e.data}))}function _(){return u.post("api/v1/upload/mime",{}).then((function(e){return e.data}))}function w(e){return u.post("api/src/getDefaultJoyeaDesc",{neid:e}).then((function(e){return e.data}))}function x(e,t){return u.post("api/v1/user/changePwd",{curPwd:e,newPwd:t}).then((function(e){return e.data}))}n("4de4"),n("b0c0");a["default"].use(o["a"]);var k=new o["a"].Store({state:{orderList:[],orderEditInfo:{name:"",id:""},userInfo:{session:"",name:"",email:""},showRealImage:!1,imagePreviewShow:!1,imagePreviewImages:[],imagePreviewStartIndex:0},getters:{getStateOrderList:function(e){return e.orderList},exist:function(e){return function(t){return e.orderList.filter((function(e){return e["neid"]===t})).length>0}},userInfo:function(e){return e.userInfo},showRealImage:function(e){return e.showRealImage},getOrderEditInfo:function(e){return e.orderEditInfo},imagePreviewShow:function(e){return e.imagePreviewShow},imagePreviewImages:function(e){return e.imagePreviewImages},imagePreviewStartIndex:function(e){return e.imagePreviewStartIndex}},mutations:{switchRealImage:function(e,t){e.showRealImage=t},add:function(e,t){e.orderList.push(t)},refreshSession:function(e,t){e.userInfo.session=t},cleanSession:function(e){e.userInfo.session=""},updateUserInfo:function(e,t){e.userInfo={session:t.session,name:t.name,email:t.email}},remove:function(e,t){e.orderList=e.orderList.filter((function(e){return e["neid"]!==t}))},clear:function(e){e.orderList=[]},setEditInfo:function(e,t){e.orderEditInfo=t}},actions:{switchRealImage:function(e,t){e.commit("switchRealImage",t)},addFunc:function(e,t){e.commit("add",t)},removeFunc:function(e,t){e.commit("remove",t)},clearFunc:function(e){e.commit("clear")},clearUserSessionFunc:function(e){e.commit("cleanSession")},updateUserInfoFunc:function(e,t){e.commit("updateUserInfo",t)},refreshSessionFunc:function(e,t){e.commit("refreshSession",t)},setOrderEditInfoFunc:function(e,t){e.commit("setEditInfo",t)}}}),I=k,S={name:"App",data:function(){return{currentJoyeaDesc:""}},methods:Object(s["a"])({},Object(o["b"])(["refreshSessionFunc"]),{onChange:function(e){this.index=e,this.currentJoyeaDesc=this.imagePreviewImages[parseInt(e)].joyeaDesc},handleClickLeftNav:function(){this.$router.back()},handleClickRightNav:function(){this.$router.push("/home")},_checkLogin:function(){var e=this;f().then((function(t){4001===t.code?(e.$notify({type:"danger",message:"登录信息已过期，请重新登陆！"}),e.$router.push("/login")):e.refreshSessionFunc(t.data)}))},checkLogin:function(){var e=this;this._checkLogin(),setInterval((function(){"/login"!==e.$route.path&&e._checkLogin()}),2e3)}}),created:function(){var e=this;localStorage.getItem("store")&&this.$store.replaceState(Object.assign({},this.$store.state,JSON.parse(localStorage.getItem("store")))),setInterval((function(){localStorage.setItem("store",JSON.stringify(e.$store.state))}),2e3),window.addEventListener("beforeunload",(function(){localStorage.setItem("store",JSON.stringify(e.$store.state))})),this.$store.state.imagePreviewShow=!1,"/login"!==this.$route.path?0===this.userInfo.session.length&&this.$router.push("/login"):0!==this.userInfo.session.length&&this.$router.replace({name:"/",params:{checked:!0}}),this.checkLogin(),document.oncontextmenu=function(e){e.preventDefault()}},computed:Object(s["a"])({},Object(o["c"])(["userInfo","imagePreviewImages","imagePreviewStartIndex"]),{showImagePreview:{get:function(){return this.$store.state.imagePreviewShow},set:function(e){this.$store.state.imagePreviewShow=e}},allowHome:function(){return this.$route.meta.allowHome}})},P=S,L=(n("034f"),n("2877")),C=Object(L["a"])(P,i,r,!1,null,null,null),O=C.exports,D=n("8c4f"),T=n("b970"),$=(n("157a"),n("09c7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"background-color":"#f7f8fa"},attrs:{id:"home"}},[n("vm-back-top",{attrs:{bottom:100,duration:1e3,timing:"ease"}}),n("van-search",{attrs:{placeholder:"请输入搜索要搜索的资源",background:"#1f1731",shape:"round","show-action":e.canGoBackSearch},on:{search:e.onSearch},scopedSlots:e._u([{key:"action",fn:function(){return[n("van-icon",{staticStyle:{"margin-top":"3px"},attrs:{name:"exchange",size:"20"},on:{click:e.goBackSearch}})]},proxy:!0}]),model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),n("div",[n("span",{staticStyle:{"font-size":"10px",color:"#444444"}},[e._v("热门搜索:")]),e._l(e.topSearchKey,(function(t){return n("van-tag",{staticStyle:{margin:"5px 2px"},on:{click:function(n){return e.handleClickTopKey(t)}}},[e._v(e._s(t)+" ")])}))],2),1===e.dir.currentPath.length&&"营销素材展示"===e.dir.currentPath[0]?n("div",{staticStyle:{"margin-bottom":"50px"}},[n("van-grid",{attrs:{"column-num":2}},e._l(e.menuPath,(function(t){return n("van-grid-item",{staticClass:"my_van-grid-item",on:{click:function(n){return e.handleClickRootMenu(t.path)}}},[n("div",{staticClass:"menu-content"},[n("van-image",{staticStyle:{width:"50px",height:"50px",padding:"30px 20px 10px 20px"},attrs:{src:t.icon,fit:"contain"}}),n("div",{staticStyle:{padding:"20px",height:"30px","font-size":"12px"}},[e._v(e._s(t.name))])],1)])})),1)],1):n("div",[n("van-sticky",{attrs:{"offset-top":46}},[n("van-row",{staticStyle:{"background-color":"#fff",padding:"8px 0"}},[n("van-col",{attrs:{span:"3"}},[0!==e.dir.currentPath.length?n("van-icon",{staticClass:"my_icon",staticStyle:{padding:"5px 10px 5px 10px"},attrs:{name:"arrow-left",size:"20"},on:{click:e.handleClickBackDir}}):e._e()],1),n("van-col",{attrs:{span:"18"}},[n("div",{staticStyle:{"margin-top":"2px"}},[e._v(" "+e._s(0===e.dir.currentPath.length?"/":e.dir.currentPath[e.dir.currentPath.length-1])+" ")])]),n("van-col",{attrs:{span:"3"}},[0!==e.dir.currentPath.length?n("van-icon",{staticClass:"my_icon",staticStyle:{padding:"5px 10px 5px 10px"},attrs:{name:"wap-home-o",size:"20"},on:{click:e.handleClickRootDir}}):e._e()],1)],1)],1),n("van-tabs",{staticStyle:{"margin-bottom":"50px"},attrs:{sticky:""},model:{value:e.currentTypeActive,callback:function(t){e.currentTypeActive=t},expression:"currentTypeActive"}},[n("van-tab",{attrs:{title:"全部"}},[0===e.dir.tableData.length?n("van-empty",{attrs:{description:"当前路径没有文件"}}):e._e(),n("van-list",e._l(e.dir.tableData,(function(t){return n("van-cell",{key:t.path},[n("van-row",[n("van-col",{attrs:{span:"4"}},[t["is_dir"]?n("van-icon",{staticClass:"my_icon",attrs:{size:"30",name:"credit-pay"}}):t.mime_type.startsWith("video")?n("van-icon",{staticClass:"my_icon",attrs:{size:"30",name:"video-o"}}):t.mime_type.startsWith("image")?n("img",{staticClass:"my_icon my_icon_size",attrs:{src:e.genPreviewUrl(t.neid,t.hash,t.rev,t.mime_type)},on:{click:function(n){return e.handleGotoPreviewImage(e.dir.tableData,t)}}}):t.mime_type.startsWith("doc")?n("van-image",{staticStyle:{width:"40px"},attrs:{src:e.handleGetDocumentImage(t.mime_type)}}):n("van-icon",{staticClass:"my_icon",attrs:{size:"30",name:"info-o"}})],1),n("van-col",{attrs:{span:"16"},on:{click:function(n){return e.handleClickItem(t)}}},[e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" "),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(" "+e._s(t.replace(e.markReg,""))+" ")])}))],2),n("van-col",{attrs:{span:"4"}},[t["is_dir"]?e._e():n("van-button",{staticStyle:{border:"#ffffff"},attrs:{icon:"plus",size:"small",type:"danger",plain:""},on:{click:function(n){return e.handleClickAddItem(t)}}})],1)],1)],1)})),1)],1),n("van-tab",{attrs:{title:"文件夹",badge:e.dir.tableData.filter((function(e){return e.is_dir})).length}},[n("van-list",e._l(e.dir.tableData,(function(t){return t.is_dir?n("van-cell",{key:t.path,on:{click:function(n){return e.handleClickItem(t)}}},[n("van-col",{attrs:{span:"4"}},[n("van-icon",{staticClass:"my_icon",attrs:{size:"30",name:"credit-pay"}})],1),n("van-col",{attrs:{span:"20"}},[e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" "),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(" "+e._s(t.replace(e.markReg,""))+" ")])}))],2)],1):e._e()})),1)],1),n("van-tab",{attrs:{title:"图片",badge:e.dir.tableData.filter((function(e){return!e.is_dir&&e.mime_type.startsWith("image")})).length}},[n("van-grid",{attrs:{border:!1,"column-num":3}},e._l(e.dir.tableData.filter((function(e){return!e.is_dir&&e.mime_type.startsWith("image")})),(function(t){return n("van-grid-item",[n("div",[n("img",{staticClass:"my_icon my_icon_size_large",attrs:{src:e.genPreviewUrl(t.neid,t.hash,t.rev,t.mime_type)},on:{click:function(n){return e.handleGotoPreviewImage(e.dir.tableData,t)}}}),n("van-button",{staticStyle:{position:"absolute",top:"0px",left:"0px",border:"#ffffff"},attrs:{round:"",plain:"",hairline:"",type:"danger",icon:"plus",size:"small"},on:{click:function(n){return e.handleClickAddItem(t)}}})],1),n("div",[n("div",{staticStyle:{"font-size":"10px","-webkit-text-size-adjust":"none"}},[e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" ")]),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(" "+e._s(t.replace(e.markReg,""))+" ")])}))],2)])})),1)],1),n("van-tab",{attrs:{title:"视频",badge:e.dir.tableData.filter((function(e){return!e.is_dir&&e.mime_type.startsWith("video")})).length}},[n("van-list",e._l(e.dir.tableData,(function(t){return!t.is_dir&&t.mime_type.startsWith("video")?n("van-cell",{key:t.path},[n("van-row",[n("van-col",{attrs:{span:"4"}},[n("van-icon",{staticClass:"my_icon",attrs:{size:"30",name:"video-o"}})],1),n("van-col",{attrs:{span:"16"},on:{click:function(n){return e.handlePreview(t)}}},[e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" "),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(" "+e._s(t.replace(e.markReg,""))+" ")])}))],2),n("van-col",{attrs:{span:"4"}},[t["is_dir"]?e._e():n("van-button",{staticStyle:{border:"#ffffff"},attrs:{icon:"plus",size:"small",type:"danger",plain:""},on:{click:function(n){return e.handleClickAddItem(t)}}})],1)],1)],1):e._e()})),1)],1),n("van-tab",{attrs:{title:"文档",badge:e.dir.tableData.filter((function(e){return!e.is_dir&&e.mime_type.startsWith("doc")})).length}},[n("van-list",e._l(e.dir.tableData,(function(t){return!t.is_dir&&t.mime_type.startsWith("doc")?n("van-cell",{key:t.path},[n("van-row",[n("van-col",{attrs:{span:"4"}},[n("van-image",{staticStyle:{width:"40px"},attrs:{src:e.handleGetDocumentImage(t.mime_type)}})],1),n("van-col",{attrs:{span:"16"},on:{click:function(n){return e.handlePreview(t)}}},[e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" "),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(" "+e._s(t.replace(e.markReg,""))+" ")])}))],2),n("van-col",{attrs:{span:"4"}},[t["is_dir"]?e._e():n("van-button",{staticStyle:{border:"#ffffff"},attrs:{icon:"plus",size:"small",type:"danger",plain:""},on:{click:function(n){return e.handleClickAddItem(t)}}})],1)],1)],1):e._e()})),1)],1)],1)],1)],1)}),j=[];n("4160"),n("1276"),n("2ca0"),n("498a"),n("159b"),n("a15b"),n("baa5"),n("8a79"),n("841c"),n("d81d");function A(e){return e.srcType&&(e.mime_type=e.srcType),e.srcNeid&&(e.neid=e.srcNeid),e.srcHash&&(e.hash=e.srcHash),e.srcRev&&(e.rev=e.srcRev),e.srcPath&&(e.path=e.srcPath),e.joyeaDesc=e.srcDesc?e.srcDesc:"",e}function N(e,t,n,a){t.forEach((function(e){A(e)})),A(a);var i=0,r=0,s=t.filter((function(e){return e.mime_type&&e.mime_type.startsWith("image")})).map((function(e){e.neid===a.neid&&(i=r),r++;var t=I.state.showRealImage;return t?{url:R(e.path,e.neid,n),joyeaDesc:e.joyeaDesc}:{url:E(e.neid,e.hash,e.rev,"pic",n),joyeaDesc:e.joyeaDesc}}));0===s.length?e.$notify({message:"当前清单没有可以预览的图片！"}):(I.state.imagePreviewShow=!0,I.state.imagePreviewStartIndex=i||0,I.state.imagePreviewImages=s)}function E(e,t,n,a,i){return"https://console.box.lenovo.com/v2/preview_router?type="+a+"&root=databox&path=&path_type=ent&from=&neid="+e+"&hash="+t+"&rev="+n+"&X-LENOVO-SESS-ID="+i+"&xxoo="+(new Date).getTime()}function R(e,t,n){return"https://console.box.lenovo.com/v2/dl_router/databox/"+e+"?neid="+t+"&rev=&_="+(new Date).getTime()+"&X-LENOVO-SESS-ID="+n}function z(e,t,n,a){t=A(t);var i=t.path.substr(t.path.lastIndexOf("/")+1),r="pic";t.mime_type.startsWith("doc")?r="doc":t.mime_type.startsWith("video")&&(r="av");var s=a?R(t.path,t.neid,n):E(t.neid,t.hash,t.rev,r,n);t.mime_type.startsWith("video")?callNextPlusPreview(i,s):t.mime_type.startsWith("doc")&&!t.mime_type.endsWith("pdf")?t.mime_type.endsWith("pdf")||window.open(s):t.mime_type.startsWith("image")}function W(e){var t="document.png";return e.startsWith("video")?t="video.png":e.endsWith("pdf")?t="pdf.png":e.endsWith("ppt")||e.endsWith("pptx")?t="ppt.png":e.endsWith("doc")?t="docm.png":e.endsWith("xlsx")&&(t="xlsx.png"),t}function F(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var a=e.join("");return a}function U(e){if(!e||"string"!=typeof e)return!1;var t=e.split("").reverse().join("");return t.substring(0,t.search(/\./)).split("").reverse().join("")}function H(e){var t=U(e);return F()+"."+t}function J(e){return e.substr(e.lastIndexOf("/")+1)}function M(e){return e.filter((function(e){return e["is_dir"]}))}var G=new a["default"]({}),B=G,V=n("6f76"),K=n.n(V),X=n("d399"),q={name:"HomeContainer",components:{VmBackTop:K.a},computed:Object(s["a"])({},Object(o["c"])(["userInfo"])),data:function(){return{topSearchKey:[],canGoBackSearch:!1,markReg:/<mark>|<\/mark>/g,globalPathType:"ent",searchKey:"",currentTypeActive:0,dir:{currentPath:[],tableData:[],loadingDir:!1},isFirst:!0,menuPath:[{name:"STICK线",path:"STICK线",icon:"menu-icon/1.png"},{name:"听装线",path:"听装线",icon:"menu-icon/2.png"},{name:"软双铝线",path:"软双铝线",icon:"menu-icon/3.png"},{name:"制粒线",path:"制粒线",icon:"menu-icon/4.png"},{name:"泡罩线",path:"泡罩线",icon:"menu-icon/5.png"},{name:"其他生产线",path:"其他生产线",icon:"menu-icon/8.png"},{name:"公司介绍",path:"公司介绍",icon:"menu-icon/6.png"},{name:"友商信息",path:"友商信息",icon:"menu-icon/7.png"}]}},methods:{handleGetDocumentImage:function(e){return W(e)},handleGotoPreviewImage:function(e,t){N(this,e,this.userInfo.session,t)},goBackSearch:function(){this.$router.push("/search")},handleClickTopKey:function(e){this.canGoBackSearch=!0,this.$router.push({path:"/search",query:{searchKey:e}})},onSearch:function(){0!==this.searchKey.trim().length?(this.canGoBackSearch=!0,this.$router.push({path:"/search",query:{searchKey:this.searchKey}})):this.$dialog({message:"要搜索的关键字不能为空！"})},handlePreview:function(e){z(this,e,this.userInfo.session)},handleClickAddItem:function(e){var t=this;this.$store.getters.exist(e["neid"])?this.$dialog.alert({message:"该素材已经在素材车中"}):w(e["neid"]).then((function(n){e.joyeaDesc=n.data,t.$store.dispatch("addFunc",e).then((function(){t.$notify({type:"success",message:"加入素材车成功！"})})).catch((function(e){t.$dialog.alert({message:"加入素材车失败："+e})}))}))},handleClickItem:function(e){e["is_dir"]?this.handleListLenovoDir(e.path,this.globalPathType):e.mime_type.startsWith("image")?this.handleGotoPreviewImage(this.dir.tableData,e):this.handlePreview(e)},handleClickRootDir:function(){this.handleListLenovoDir("/营销素材展示"),this.currentTypeActive=0},handleClickRootMenu:function(e){this.handleListLenovoDir("/营销素材展示/"+e)},handleClickBackDir:function(){if(this.dir.currentPath.length>0){for(var e="/",t=0;t<this.dir.currentPath.length-1;t++)e=e+this.dir.currentPath[t]+"/";this.handleListLenovoDir(e)}},genPreviewUrl:function(e,t,n,a){var i="pic";return a.startsWith("doc")?i="doc":a.startsWith("video")&&(i="av"),E(e,t,n,i,this.userInfo.session)},handleGetTopSearchKey:function(){var e=this;d({action:"getTopSearchKey"}).then((function(t){e.topSearchKey=t["data"]}))},handleListLenovoDir:function(e,t){var n=this;this.dir.loadingDir=!0;var a=X["a"].loading({duration:0,forbidClick:!0,message:"拼命加载中..."});d({action:"listLenovoDir",path:e.replace("+","%2B"),path_type:void 0===t?"ent":t}).then((function(e){a.clear(),e.result?(n.currentTypeActive=0,n.dir.tableData=[],e.data.content&&(e.data.content.forEach((function(e){e.joyeaDesc="",e.isModify=!1,n.dir.tableData.push(e)})),n.dir.currentPath=[],e.data.path.split("/").forEach((function(e){0!==e.length&&n.dir.currentPath.push(e)})))):console.log("文件夹列表获取失败"+e.msg),n.dir.loadingDir=!1}))}},mounted:function(){this.handleListLenovoDir("/营销素材展示","ent")},activated:function(){B.$on("showDir",function(e){this.handleListLenovoDir(e.path,"ent")}.bind(this)),this.handleGetTopSearchKey()}},Q=q,Y=(n("1fc2"),Object(L["a"])(Q,$,j,!1,null,"73dfe083",null)),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"order"}},[0===e.orderList.length?n("van-empty",{attrs:{description:"清单车空空如也"}}):e._e(),n("div",{staticStyle:{"margin-bottom":"100px"}},e._l(e.orderList,(function(t){return n("van-swipe-cell",{key:t.path,scopedSlots:e._u([{key:"right",fn:function(){return[n("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(n){return e.handleDeleteOrderList(t)}}})]},proxy:!0}],null,!0)},[n("van-card",{attrs:{desc:void 0!==t.joyeaDesc&&t.joyeaDesc.length>0?t.joyeaDesc:"暂未设置解说词",title:t.path.substr(t.path.lastIndexOf("/")+1),thumb:t.mime_type.startsWith("image")?e.genPreviewUrl(t.neid,t.hash,t.rev,t.mime_type):e.handleGetDocumentImage(t.mime_type)},on:{click:function(n){return e.handleClickOrderItem(t)}}})],1)})),1),n("van-submit-bar",{staticStyle:{"margin-bottom":"50px"},attrs:{"button-text":e.getOrderEditInfo.name?"重新保存":"提交清单","safe-area-inset-bottom":!1},on:{submit:e.handleSaveList}},[e.editMode?n("div",{staticStyle:{padding:"0 20px",position:"absolute",left:"0"}},[n("div",[e._v(" 正在编辑:"+e._s(e.getOrderEditInfo.name.length<10?e.getOrderEditInfo.name:e.getOrderEditInfo.name.substr(0,10)+"...")+" ")]),n("div",[n("van-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleExitEditMode}},[e._v("退出编辑")])],1)]):e._e(),n("div",{staticStyle:{"margin-right":"5px"}},[e._v(e._s("合计："+this.$store.getters.getStateOrderList.length+"个")+" ")])]),n("van-dialog",{attrs:{title:e.editMode?"确认保存编辑后新清单？":"确认提交新清单？","show-cancel-button":""},on:{cancel:e.handleCancelSubmit,confirm:e.handleSubmitNewAlbum},model:{value:e.submitDialogVisible,callback:function(t){e.submitDialogVisible=t},expression:"submitDialogVisible"}},[n("van-field",{attrs:{label:"清单名称",placeholder:"请输入清单名"},model:{value:e.newAlbumName,callback:function(t){e.newAlbumName=t},expression:"newAlbumName"}})],1),n("van-action-sheet",{attrs:{title:"编辑"},model:{value:e.orderItemEdit.visible,callback:function(t){e.$set(e.orderItemEdit,"visible",t)},expression:"orderItemEdit.visible"}},[n("van-field",{attrs:{label:"文件名",value:e.orderItemEdit.item.path.substr(e.orderItemEdit.item.path.lastIndexOf("/")+1),disabled:""}}),n("van-field",{attrs:{rows:"2",label:"解说词",type:"textarea","right-icon":"edit",maxlength:"50",placeholder:"请输入解说词","show-word-limit":""},model:{value:e.orderItemEdit.item.joyeaDesc,callback:function(t){e.$set(e.orderItemEdit.item,"joyeaDesc",t)},expression:"orderItemEdit.item.joyeaDesc"}}),n("van-button",{attrs:{type:"warning",round:"",block:""},on:{click:function(t){return e.handleFinishEdit(e.item)}}},[e._v("确认修改")])],1)],1)},te=[],ne={name:"OrderContainer",data:function(){return{newAlbumName:"",submitDialogVisible:!1,orderItemEdit:{visible:!1,item:{path:""}}}},methods:Object(s["a"])({},Object(o["b"])(["clearFunc","removeFunc","setOrderEditInfoFunc"]),{handleGetDocumentImage:function(e){return W(e)},handleClickOrderItem:function(e){this.orderItemEdit.item=e,this.orderItemEdit.visible=!0},handleDeleteOrderList:function(e){this.removeFunc(e.neid)},handleSaveList:function(){0!==this.orderList.length?(this.newAlbumName=this.editMode?this.getOrderEditInfo.name:"",this.submitDialogVisible=!0):this.$notify({type:"warning",message:"清单列表为空！"})},handleExitEditMode:function(){var e=this;this.$dialog.confirm({message:"确定退出编辑清单模式？"}).then((function(){e.setOrderEditInfoFunc({}).then((function(){}))}))},handleCancelSubmit:function(){this.newAlbumName=""},handleFinishEdit:function(e){this.orderItemEdit.visible=!1},handleSubmitNewAlbum:function(){var e=this;0!==this.newAlbumName.length?d({action:"album",method:this.editMode?"reSave":"save",id:this.getOrderEditInfo.id,name:this.newAlbumName,src:this.orderList}).then((function(t){t.result?(e.$notify({type:"success",message:e.editMode?"重新编辑成功":"保存成功"}),e.$store.dispatch("clearFunc"),e.setOrderEditInfoFunc({}).then((function(){}))):e.$notify({type:"warning",message:e.editMode?"重新编辑失败":"保存失败"})})):this.$notify({type:"warning",message:"清单名称不能为空，你先设置！"})},genPreviewUrl:function(e,t,n,a){var i="pic";return a.startsWith("doc")?i="doc":a.startsWith("video")&&(i="av"),E(e,t,n,i,this.userInfo.session)}}),computed:Object(s["a"])({},Object(o["d"])({orderList:function(e){return e.orderList}}),{},Object(o["c"])(["userInfo","getOrderEditInfo"]),{editMode:function(){return this.getOrderEditInfo.name&&this.getOrderEditInfo.name.length>0}}),activated:function(){}},ae=ne,ie=(n("afe3"),Object(L["a"])(ae,ee,te,!1,null,"d1c21dea",null)),re=ie.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"background-color":"#f7f8fa"},attrs:{id:"mine"}},[n("van-cell",[n("van-row",[n("van-col",{attrs:{span:"8"}},[n("avatars",{attrs:{backgroundColor:"#eb7808",color:"#ffffff",size:80,username:e.userInfo.name}})],1),n("van-col",{attrs:{span:"16"}},[n("h3",{staticStyle:{margin:"2px 0 0 0"}},[e._v(e._s(e.userInfo.name))]),n("van-divider",{staticStyle:{margin:"2px 0 0 0"}}),n("h4",{staticStyle:{margin:"2px 0 0 0"}},[e._v(e._s(e.userInfo.email))])],1)],1)],1),n("van-divider"),n("van-cell-group",{attrs:{title:"功能"}},[n("van-cell",{attrs:{title:"素材上传","is-link":""},on:{click:e.handleClickUpload}}),n("van-cell",{attrs:{title:"我的上传","is-link":""},on:{click:e.handleClickMyUpload}}),n("van-cell",{attrs:{title:"我的清单","is-link":""},on:{click:e.handleClickMyList}}),n("van-cell",{attrs:{title:"修改密码","is-link":""},on:{click:e.handleClickChangePwd}})],1),n("van-cell-group",{attrs:{title:"设置"}},[n("van-cell",{attrs:{center:"",title:"图片加载原图"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-switch",{attrs:{size:"24"},model:{value:e.showRealImage,callback:function(t){e.showRealImage=t},expression:"showRealImage"}})]},proxy:!0}])})],1),n("van-button",{staticStyle:{"margin-top":"100px"},attrs:{type:"info",round:"",block:""},on:{click:e.handleLogout}},[e._v("注销登录")])],1)},oe=[],ce=n("198d"),le=n.n(ce),ue={components:{avatars:le.a},name:"MineContainer",data:function(){return{}},computed:Object(s["a"])({showRealImage:{get:function(){return this.$store.state.showRealImage},set:function(e){this.$store.state.showRealImage=e}}},Object(o["c"])(["userInfo"])),methods:Object(s["a"])({},Object(o["b"])(["clearUserSessionFunc"]),{handleClickMyLike:function(){this.$notify("收藏功能开发中。。。")},handleClickMyList:function(){this.$router.push("/album")},handleClickChangePwd:function(){this.$router.push("/user/changePwd")},handleClickUpload:function(){this.$router.push("/upload/index")},handleClickMyUpload:function(){this.$router.push("/upload/mime")},handleLogout:function(){var e=this;this.$dialog.confirm({message:"确定退出登录？"}).then((function(){m().then((function(t){e.clearUserSessionFunc().then((function(){e.$router.push("/login")}))}))})).catch((function(e){console.log(e)}))}}),created:function(){}},de=ue,he=Object(L["a"])(de,se,oe,!1,null,"663e497c",null),me=he.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"padding-top":"5px","margin-bottom":"80px"},attrs:{id:"search"}},[n("vm-back-top",{attrs:{bottom:100,duration:1e3,timing:"ease"}}),n("van-tabs",{attrs:{sticky:""},model:{value:e.currentTypeActive,callback:function(t){e.currentTypeActive=t},expression:"currentTypeActive"}},[n("van-tab",{attrs:{title:"全部"}},[0===e.searchResultList.length?n("van-empty",{attrs:{description:"没有找到搜索结果！"}}):e._e(),n("van-list",{attrs:{finished:e.searchFinished,"finished-text":"没有更多了"},on:{load:e.handleSearch},model:{value:e.searchLoading,callback:function(t){e.searchLoading=t},expression:"searchLoading"}},e._l(e.searchResultList,(function(t){return n("van-cell",{key:t.path},[n("van-row",{on:{click:function(n){return e.handleClickItem(t)}}},[n("van-col",{attrs:{span:"4"}},[t["is_dir"]?n("van-icon",{staticClass:"my_icon",attrs:{size:"30",name:"credit-pay"}}):t.mime_type.startsWith("video")?n("van-icon",{staticClass:"my_icon",attrs:{size:"30",name:"video-o"}}):t.mime_type.startsWith("image")?n("img",{staticClass:"my_icon my_icon_size",attrs:{src:e.genPreviewUrl(t.neid,t.hash,t.rev,t.mime_type)},on:{click:function(n){return e.handleGotoPreviewImage(e.searchResultList,t)}}}):t.mime_type.startsWith("doc")?n("van-icon",{staticClass:"my_icon",attrs:{size:"30",name:"orders-o"}}):n("van-icon",{staticClass:"my_icon",attrs:{size:"30",name:"info-o"}})],1),n("van-col",{attrs:{span:"16"}},[e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" "),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(" "+e._s(t.replace(e.markReg,""))+" ")])}))],2),n("van-col",{attrs:{span:"4"}},[t["is_dir"]?e._e():n("van-button",{staticStyle:{border:"#ffffff"},attrs:{icon:"plus",size:"small",type:"danger",plain:""},on:{click:function(n){return e.handleClickAddItem(t)}}})],1)],1)],1)})),1)],1),n("van-tab",{attrs:{title:"文件夹",badge:e.searchResultList.filter((function(e){return e.is_dir})).length}},[n("van-list",{attrs:{finished:e.searchFinished,"finished-text":"没有更多了"},on:{load:e.handleSearch},model:{value:e.searchLoading,callback:function(t){e.searchLoading=t},expression:"searchLoading"}},e._l(e.searchResultList,(function(t){return t.is_dir?n("van-cell",{key:t.path,on:{click:function(n){return e.handleClickItem(t)}}},[n("van-icon",{staticClass:"my_icon",attrs:{name:"credit-pay"}}),e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" "),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(e._s(t.replace(e.markReg,""))+" ")])}))],2):e._e()})),1)],1),n("van-tab",{attrs:{title:"图片",badge:e.searchResultList.filter((function(e){return!e.is_dir&&e.mime_type.startsWith("image")})).length}},[n("van-list",{attrs:{finished:e.searchFinished,"finished-text":"没有更多了"},on:{load:e.handleSearch},model:{value:e.searchLoading,callback:function(t){e.searchLoading=t},expression:"searchLoading"}},[n("van-grid",{staticStyle:{background:"#ffffff"},attrs:{border:!1,"column-num":3}},e._l(e.searchResultList.filter((function(e){return!e.is_dir&&e.mime_type.startsWith("image")})),(function(t){return n("van-grid-item",[n("div",[n("img",{staticClass:"my_icon my_icon_size_large",attrs:{src:e.genPreviewUrl(t.neid,t.hash,t.rev,t.mime_type)},on:{click:function(n){return e.handleGotoPreviewImage(e.searchResultList,t)}}}),n("van-button",{staticStyle:{position:"absolute",top:"0px",left:"0",border:"#ffffff"},attrs:{round:"",plain:"",hairline:"",type:"danger",icon:"plus",size:"small"},on:{click:function(n){return e.handleClickAddItem(t)}}})],1),n("div",[n("div",{staticStyle:{"font-size":"10px","-webkit-text-size-adjust":"none"}},[e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" ")]),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(" "+e._s(t.replace(e.markReg,""))+" ")])}))],2)])})),1)],1)],1),n("van-tab",{attrs:{title:"视频",badge:e.searchResultList.filter((function(e){return!e.is_dir&&e.mime_type.startsWith("video")})).length}},[n("van-list",{attrs:{finished:e.searchFinished,"finished-text":"没有更多了"},on:{load:e.handleSearch},model:{value:e.searchLoading,callback:function(t){e.searchLoading=t},expression:"searchLoading"}},e._l(e.searchResultList,(function(t){return!t.is_dir&&t.mime_type.startsWith("video")?n("van-cell",{key:t.path},[n("van-row",{on:{click:function(n){return e.handlePreview(t)}}},[n("van-col",{attrs:{span:"4"}},[n("van-icon",{staticClass:"my_icon",attrs:{name:"video-o"}})],1),n("van-col",{attrs:{span:"16"},on:{click:function(n){return e.handlePreview(t)}}},[e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" "),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(" "+e._s(t.replace(e.markReg,""))+" ")])}))],2),n("van-col",{attrs:{span:"4"}},[t["is_dir"]?e._e():n("van-button",{staticStyle:{border:"#ffffff"},attrs:{icon:"plus",size:"small",type:"danger",plain:""},on:{click:function(n){return e.handleClickAddItem(t)}}})],1)],1)],1):e._e()})),1)],1),n("van-tab",{attrs:{title:"文档",badge:e.searchResultList.filter((function(e){return!e.is_dir&&e.mime_type.startsWith("doc")})).length}},[n("van-list",{attrs:{finished:e.searchFinished,"finished-text":"没有更多了"},on:{load:e.handleSearch},model:{value:e.searchLoading,callback:function(t){e.searchLoading=t},expression:"searchLoading"}},e._l(e.searchResultList,(function(t){return!t.is_dir&&t.mime_type.startsWith("doc")?n("van-cell",{key:t.path},[n("van-row",{on:{click:function(n){return e.handlePreview(t)}}},[n("van-col",{attrs:{span:"4"}},[n("van-image",{staticStyle:{width:"40px"},attrs:{src:e.handleGetDocumentImage(t.mime_type)}})],1),n("van-col",{attrs:{span:"16"}},[e._v(" "+e._s(t.path.substr(t.path.lastIndexOf("/")+1))+" "),e._l(t.tags,(function(t){return n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:""}},[e._v(" "+e._s(t.replace(e.markReg,""))+" ")])}))],2),n("van-col",{attrs:{span:"4"}},[t["is_dir"]?e._e():n("van-button",{staticStyle:{border:"#ffffff"},attrs:{icon:"plus",size:"small",type:"danger",plain:""},on:{click:function(n){return e.handleClickAddItem(t)}}})],1)],1)],1):e._e()})),1)],1)],1)],1)},pe=[],ve=(n("d3b7"),{name:"SearchResult",components:{VmBackTop:K.a},computed:Object(s["a"])({},Object(o["c"])(["userInfo"])),data:function(){return{markReg:/<mark>|<\/mark>/g,currentTypeActive:0,searchResultList:[],searchKey:"",searchOffset:0,searchLoading:!1,searchFinished:!1}},methods:{handleGetDocumentImage:function(e){return W(e)},handleGotoPreviewImage:function(e,t){N(this,e,this.userInfo.session,t)},handleClickItem:function(e){e["is_dir"]?(B.$emit("showDir",e),this.$router.back()):e.mime_type.startsWith("image")?this.handleGotoPreviewImage(this.searchResultList,e):this.handlePreview(e)},handlePreview:function(e){z(this,e,this.userInfo.session)},handleClickAddItem:function(e){var t=this;this.$store.getters.exist(e["neid"])?this.$dialog.alert({message:"该素材已经在素材车中"}):w(e["neid"]).then((function(n){e.joyeaDesc=n.data,t.$store.dispatch("addFunc",e).then((function(){t.$notify({type:"success",message:"加入素材车成功！"})})).catch((function(e){t.$dialog.alert({message:"加入素材车失败："+e})}))})),event.stopPropagation()},genPreviewUrl:function(e,t,n,a){var i="pic";return a.startsWith("doc")?i="doc":a.startsWith("video")&&(i="av"),E(e,t,n,i,this.userInfo.session)},handleSearch:function(){var e=this;this.searchLoading=!0;var t=X["a"].loading({duration:0,forbidClick:!0,message:"拼命加载中..."});d({action:"search",searchKey:this.searchKey,offset:this.searchOffset}).then((function(n){t.clear(),n.result?(e.searchFinished=!n["has_more"],e.searchFinished||(e.searchOffset=n["next_offset"]),0===n.content.length?e.$dialog({message:"没有搜索到与【"+e.searchKey+"】有关的文件或文件夹！"}):n.content.forEach((function(t){t.joyeaDesc="",t.isModify=!1,e.searchResultList.push(t)}))):(e.$notify.error({title:"搜索出错",message:"搜索过程出现错误："+n.msg}),console.log(n.msg))})).finally((function(){e.searchLoading=!1}))}},activated:function(){this.currentTypeActive=0,this.$route.query.searchKey&&(this.searchKey=this.$route.query.searchKey,this.searchResultList=[],this.searchOffset=0,this.searchFinished=!1,this.handleSearch())}}),ge=ve,be=Object(L["a"])(ge,fe,pe,!1,null,"9a3badd6",null),ye=be.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-bottom":"50px"}},[n("van-dropdown-menu",{attrs:{"active-color":"#ee0a24"}},[n("van-dropdown-item",{attrs:{options:e.hangyeOption},on:{change:e.handleTagChange},model:{value:e.selectedHangyeTag,callback:function(t){e.selectedHangyeTag=t},expression:"selectedHangyeTag"}}),n("van-dropdown-item",{attrs:{options:e.xianbieOption},on:{change:e.handleTagChange},model:{value:e.selectedXianbieTag,callback:function(t){e.selectedXianbieTag=t},expression:"selectedXianbieTag"}}),n("van-dropdown-item",{attrs:{options:e.jixingOption},on:{change:e.handleTagChange},model:{value:e.selectedJixingTag,callback:function(t){e.selectedJixingTag=t},expression:"selectedJixingTag"}})],1),n("van-dropdown-menu",{attrs:{"active-color":"#ee0a24"}},[n("van-dropdown-item",{attrs:{options:e.jieduanOption},on:{change:e.handleTagChange},model:{value:e.selectedJieduanTag,callback:function(t){e.selectedJieduanTag=t},expression:"selectedJieduanTag"}}),n("van-dropdown-item",{attrs:{options:e.shichangOption},on:{change:e.handleTagChange},model:{value:e.selectedShichangTag,callback:function(t){e.selectedShichangTag=t},expression:"selectedShichangTag"}})],1),n("van-tabs",{on:{click:e.handleClickTab}},[n("van-tab",{attrs:{title:"收藏数排序"}}),n("van-tab",{attrs:{title:"时间排序"}})],1),n("van-pull-refresh",{on:{refresh:e.handleRefreshAlbum},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.handleListAlbum},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.albumList,(function(t){return n("van-swipe-cell",{key:t.path,scopedSlots:e._u([{key:"right",fn:function(){},proxy:!0}],null,!0)},[n("van-card",{staticStyle:{margin:"2px 0 2px 0"},attrs:{title:t.albumName,thumb:t.cover},on:{click:function(n){return e.handleShowAlbum(t)}},scopedSlots:e._u([{key:"tags",fn:function(){return[n("div",{staticStyle:{"word-break":"break-all","white-space":"normal"}},[e._v(e._s(t.shareDesc?t.shareDesc:"暂未设置简介")+" ")]),n("div",{staticStyle:{color:"#8c939d","line-height":"20px"}},[e._v("上传者: "+e._s(t.userName))]),n("div",{staticStyle:{color:"#8c939d","line-height":"20px"}},[e._v("创建于: "+e._s(t.createdAt))])]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticStyle:{"margin-top":"5px"}},[n("span",{staticStyle:{position:"absolute",left:"20px"}},[-1!==t.hangyeTagId?n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:"",type:"warning",color:"#cccccc"}},[e._v(" "+e._s(e.hangyeOption.find((function(e){return e.value===t.hangyeTagId})).text)+" ")]):e._e(),-1!==t.xianbieTagId?n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:"",type:"warning",color:"#cccccc"}},[e._v(" "+e._s(e.xianbieOption.find((function(e){return e.value===t.xianbieTagId})).text)+" ")]):e._e(),-1!==t.jixingTagId?n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:"",type:"warning",color:"#cccccc"}},[e._v(" "+e._s(e.jixingOption.find((function(e){return e.value===t.jixingTagId})).text)+" ")]):e._e(),-1!==t.jieduanTagId?n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:"",type:"warning",color:"#cccccc"}},[e._v(" "+e._s(e.jieduanOption.find((function(e){return e.value===t.jieduanTagId})).text)+" ")]):e._e(),-1!==t.shichangTagId?n("van-tag",{staticStyle:{"margin-right":"2px"},attrs:{mark:"",type:"warning",color:"#cccccc"}},[e._v(" "+e._s(e.shichangOption.find((function(e){return e.value===t.shichangTagId})).text)+" ")]):e._e()],1),n("van-button",{attrs:{plain:"",size:"mini"},on:{click:function(n){return e.handleCollect(t)}}},[e._v(e._s((t.isCopied?"已收藏 ":"收藏 ")+t.likeNum)+" ")])],1)]},proxy:!0}],null,!0)})],1)})),1)],1),n("van-action-sheet",{attrs:{title:e.albumItem.albumName},model:{value:e.albumVisible,callback:function(t){e.albumVisible=t},expression:"albumVisible"}},[n("van-grid",{attrs:{border:"","column-num":3,gutter:5}},e._l(e.albumItem.srcList,(function(t){return n("van-grid-item",{on:{click:function(n){return e.handleGotoPreview(t)}}},[t.srcType.startsWith("image")?n("van-image",{staticClass:"my_icon my_preview_size",attrs:{src:e.genPreviewUrl(t.srcNeid,t.srcHash,t.srcRev,t.srcType)},on:{click:function(n){return e.handlePreview(t)}}}):t.srcType.startsWith("video")?n("van-image",{staticClass:"my_icon my_preview_size",attrs:{src:"video.png"},on:{click:function(n){return e.handlePreviewVideo(t)}}}):t.srcType.startsWith("doc")?n("van-image",{staticClass:"my_icon my_preview_size",attrs:{src:e.handleGetDocumentImage(t.srcType)},on:{click:function(n){return e.handlePreviewDoc(t)}}}):n("van-image",{staticClass:"my_icon my_preview_size",attrs:{src:"unknown.png"},on:{click:function(n){return e.handlePreview(t)}}}),n("div",{staticStyle:{width:"98%"}},[n("div",{staticStyle:{"font-size":"10px","-webkit-text-size-adjust":"none","word-break":"break-all"}},[e._v(" "+e._s(t.srcPath.substr(t.srcPath.lastIndexOf("/")+1))+" ")]),e._l(t.tags,(function(t){return n("van-tag",{attrs:{round:"",type:"success"}},[e._v(e._s(t.replace(e.markReg,"")))])}))],2)],1)})),1)],1),n("van-button",{staticClass:"float-button",attrs:{round:"",type:"info",icon:"plus"},on:{click:e.handleClickShareAlbum}})],1)},we=[],xe=(n("7db0"),[{text:"不限行业",value:-1},{text:"药品",value:0},{text:"保健品",value:1},{text:"乳品",value:2},{text:"其他",value:3}]),ke=[{text:"不限线别",value:-1},{text:"固体stick线",value:0},{text:"液体stick线",value:1},{text:"听装线",value:2},{text:"泡罩线",value:3},{text:"软双铝线",value:4},{text:"制粒线",value:5},{text:"其他",value:6}],Ie=[{text:"不限剂型",value:-1},{text:"颗粒",value:0},{text:"丸剂",value:1},{text:"粉剂",value:2},{text:"干混悬剂",value:3},{text:"液体",value:4},{text:"片剂",value:5},{text:"胶囊",value:6},{text:"其他",value:7}],Se=[{text:"不限项目阶段",value:-1},{text:"商机挖掘阶段",value:0},{text:"需求引导阶段",value:1},{text:"立项阶段",value:2},{text:"URS及方案确认阶段",value:3},{text:"报价阶段",value:4},{text:"投标阶段",value:5},{text:"合同谈判阶段",value:6},{text:"通用",value:7}],Pe=[{text:"不限细分市场",value:-1},{text:"大规格中药颗粒",value:0},{text:"头孢类颗粒",value:1},{text:"干混悬剂",value:2},{text:"蒙脱石散",value:3},{text:"滴丸",value:4},{text:"水丸",value:5},{text:"中药饮片超微粉",value:6},{text:"中药膏方",value:7},{text:"中药口服液",value:8},{text:"西药口服液",value:9},{text:"软双铝",value:10},{text:"益生菌",value:11},{text:"蛋白粉",value:12},{text:"代餐粉",value:13},{text:"液体保健品",value:14},{text:"奶粉听装线",value:15},{text:"奶粉stick线",value:16},{text:"其他",value:17}],Le=[{url:"cover-icon/1.jpg",value:1},{url:"cover-icon/2.jpg",value:2},{url:"cover-icon/3.jpg",value:3},{url:"cover-icon/4.jpg",value:4},{url:"cover-icon/5.jpg",value:5},{url:"cover-icon/6.jpg",value:6}],Ce={name:"SquareContainer",data:function(){return{hangyeOption:xe,xianbieOption:ke,jixingOption:Ie,jieduanOption:Se,shichangOption:Pe,albumCoverOption:Le,selectedHangyeTag:-1,selectedXianbieTag:-1,selectedJixingTag:-1,selectedJieduanTag:-1,selectedShichangTag:-1,curPage:1,sortType:0,pageSize:10,loading:!1,refreshing:!1,finished:!1,albumList:[],albumVisible:!1,albumItem:{}}},methods:{handleTagChange:function(e){this.handleRefreshAlbum()},handleClickTab:function(e,t){this.sortType=e,this.handleRefreshAlbum()},handleCollect:function(e){var t=this;event.stopPropagation(),console.log("123"),e.userId===this.userInfo.email?this.$notify({type:"danger",message:"不能收藏自己的清单!"}):e.isCopied?this.$dialog.confirm({message:"您已收藏此清单，是否继续收藏？"}).then((function(){b(e.albumId).then((function(n){t.$notify({type:"success",message:"收藏成功!"}),e.likeNum++,e.isCopied=!0}))})).catch((function(){})):b(e.albumId).then((function(n){t.$notify({type:"success",message:"收藏成功!"}),e.likeNum++,e.isCopied=!0}))},handleRefreshAlbum:function(){this.finished=!1,this.refreshing=!0,this.curPage=1,this.albumList=[],this.handleListAlbum()},handleShowAlbum:function(e){this.albumItem=e,this.albumVisible=!0},handleGetDocumentImage:function(e){return W(e)},handleGotoPreview:function(e){e.mime_type.startsWith("image")||this.handlePreview(e)},handlePreviewDoc:function(e){z(this,e,this.userInfo.session),event.stopPropagation()},handlePreviewVideo:function(e){z(this,e,this.userInfo.session),event.stopPropagation()},handlePreview:function(e){N(this,this.albumItem.srcList,this.userInfo.session,e)},genPreviewUrl:function(e,t,n,a){var i="pic";return a.startsWith("doc")?i="doc":a.startsWith("video")&&(i="av"),E(e,t,n,i,this.userInfo.session)},handleListAlbum:function(){var e=this;this.loading=!0;var t="pic";p(this.curPage,this.pageSize,!0,this.sortType,this.selectedHangyeTag,this.selectedXianbieTag,this.selectedJixingTag,this.selectedJieduanTag,this.selectedShichangTag).then((function(n){e.loading=!1,e.refreshing=!1,n.data.forEach((function(n){if(n.srcList.forEach((function(n){n.url=E(n.srcNeid,n.srcHash,n.srcRev,t,e.userInfo.session)})),n.shareLocalCoverId){var a=e.albumCoverOption.find((function(e){return n.shareLocalCoverId===e.value+""}));if(a)n.cover=a.url;else{var i=n.srcList.filter((function(e){return e.srcType.startsWith("image")&&e.srcNeid===n.shareCoverNeid}));n.cover=i.length>0?i[0].url:"cover.png"}}else{var r=n.srcList.filter((function(e){return e.srcType.startsWith("image")&&e.srcNeid===n.shareCoverNeid}));n.cover=r.length>0?r[0].url:"cover.png"}e.albumList.push(n)})),n.data.length<e.pageSize&&(e.finished=!0),e.curPage++}))},handleClickShareAlbum:function(){this.$router.push("/editShare")}},computed:Object(s["a"])({},Object(o["c"])(["userInfo"])),created:function(){this.handleListAlbum()}},Oe=Ce,De=(n("4fa2"),Object(L["a"])(Oe,_e,we,!1,null,"a3ab11be",null)),Te=De.exports,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{margin:"10px",color:"#1f1731"}},[e._v("请选择要上传的文件(最多可选9个文件)")]),n("van-uploader",{attrs:{multiple:"",accept:"*","max-count":"9","after-read":e.afterRead,"preview-full-image":!1},model:{value:e.filePreviewList,callback:function(t){e.filePreviewList=t},expression:"filePreviewList"}}),n("van-cell-group",e._l(e.filePreviewList,(function(t,a){return n("div",[n("van-divider",{style:{borderColor:"#000000"}},[e._v(" "+e._s("文件 "+(a+1))+" ")]),n("van-field",{key:t.name,attrs:{label:"审核说明:",type:"textarea",autosize:"",rows:"2",placeholder:e.fileDescPlaceholder},model:{value:t.desc,callback:function(n){e.$set(t,"desc",n)},expression:"file.desc"}})],1)})),0),n("van-button",{staticStyle:{"margin-top":"100px"},attrs:{type:"info",round:"",block:""},on:{click:e.handleClickUpload}},[e._v("开始上传")])],1)},je=[],Ae=l.a.create({baseURL:"/",timeout:36e5});function Ne(e,t){return Ae.get("https://console.box.lenovo.com/v2/fileops/auth_upload/databox/营销素材展示/素材库上传临时文件夹?path_type=ent&X-LENOVO-SESS-ID="+t+"&bytes="+e).then((function(e){return e.data}))}function Ee(e,t,n,a){var i=e+"/v2/files/databox/营销素材展示/素材库上传临时文件夹/"+n+"?X-LENOVO-SESS-ID="+a+"&path_type=ent&bytes="+t.size+"&filename="+n+"$overwrite=true",r=new FormData;r.append("file",t);var s={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){e.loaded,e.total}};return Ae.post(i,r,s).then((function(e){return e.data}))}var Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-action-sheet",{attrs:{title:"选择目录","close-on-click-overlay":!1,"close-icon":""},on:{close:e.onClose},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",[n("span",[n("span",{staticStyle:{color:"#b3d8ff","font-size":"15px",cursor:"pointer"},on:{click:function(t){return e.handleListLenovoDir("/营销素材展示","ent")}}},[e._v("首页")]),e._l(e.dir.currentPath,(function(t,a){return"营销素材展示"!==t?n("span",{staticStyle:{display:"inline"}},[e._v("/ "),n("span",{staticStyle:{color:"#b3d8ff","font-size":"15px",cursor:"pointer"},on:{click:function(n){return e.handleClickDirPath(t,a)}}},[e._v(e._s(t))])]):e._e()}))],2),n("van-button",{staticStyle:{margin:"0 20px"},attrs:{type:"primary"},on:{click:e.handleSelect}},[e._v("选择")])],1),n("div",[n("van-list",[e._l(e.filterDirList(e.dir.tableData),(function(t){return"/营销素材展示/素材库上传临时文件夹"!==t.path?n("van-cell",{key:t.path,attrs:{title:e.genFileName(t.path)},on:{click:function(n){return e.handleClickItem(t)}}}):e._e()})),0===e.filterDirList(e.dir.tableData).length?n("van-empty",{attrs:{image:"error",description:"没有可选目录啦!"}}):e._e()],2)],1)])},ze=[],We={name:"LenovoDirSelector",data:function(){return{dir:{currentPathNeid:"",currentPath:[],tableData:[],loadingDir:!1}}},props:{visible:{type:Boolean,default:!0}},methods:{genFileName:J,filterDirList:M,onClose:function(){this.handleSelect()},handleSelect:function(){this.$emit("selectPath",{neid:this.dir.currentPathNeid,path:this.dir.currentPath})},handleClickItem:function(e){this.handleListLenovoDir(e.path,"ent")},handleClickDirPath:function(e,t){for(var n="",a=0;a<=t;a++)n=n+"/"+this.dir.currentPath[a];this.handleListLenovoDir(n,"ent")},handleListLenovoDir:function(e,t){var n=this;this.dir.loadingDir=!0;var a=X["a"].loading({duration:0,forbidClick:!0,message:"拼命加载中..."});d({action:"listLenovoDir",path:e.replace("+","%2B"),path_type:void 0===t?"ent":t}).then((function(e){a.clear(),e.result?(n.currentTypeActive=0,n.dir.tableData=[],e.data.content&&(e.data.content.forEach((function(e){e.joyeaDesc="",e.isModify=!1,n.dir.tableData.push(e)})),n.dir.currentPath=[],n.dir.currentPathNeid=e.data.neid,e.data.path.split("/").forEach((function(e){0!==e.length&&n.dir.currentPath.push(e)})))):console.log("文件夹列表获取失败"+e.msg),n.dir.loadingDir=!1}))}},created:function(){this.handleListLenovoDir("/营销素材展示","ent")}},Fe=We,Ue=Object(L["a"])(Fe,Re,ze,!1,null,"7fcf3b74",null),He=Ue.exports,Je={name:"Index",components:{LenovoDirSelector:He},data:function(){return{fileDescPlaceholder:"请输入素材内容、素材使用场景、素材使用说明等。",pathSelectorVisible:!1,uploadPath:"",uploadPathNeid:"",uploadFile:{},uploadFileName:"",preUploadLoading:!1,filePreviewList:[]}},created:function(){},methods:{handleSelectPath:function(e){this.uploadPath="/"+e.path.join("/"),this.uploadPathNeid=e.neid,this.pathSelectorVisible=!1},getPreviewUrl:function(e){var t="pic";return e.mime_type.startsWith("doc")?t="doc":e.mime_type.startsWith("video")&&(t="av"),E(e.neid,e.hash,e.rev,t,this.userInfo.session)},afterRead:function(e){this.filePreviewList.forEach((function(e){e.tempFileName=H(e.file.name)}))},handleClickUpload:function(){for(var e=this,t=0;t<this.filePreviewList.length;t++)if(!this.filePreviewList[t].desc||0===this.filePreviewList[t].desc.trim().length)return void this.$notify({type:"warning",message:"请填写文件[ "+(t+1)+" ]文件说明！"});var n=X["a"].loading({duration:0,forbidClick:!0,message:"拼命上传中..."}),a=this.filePreviewList.length,i=0;this.filePreviewList.forEach((function(t){Ne(t.file.size,e.userInfo.session).then((function(r){var s=r.region;t.status="uploading",t.message="上传中...",Ee(s,t.file,t.tempFileName,e.userInfo.session).then((function(r){y(e.userInfo.email,t.tempFileName,r.neid,r.mime_type,r.hash,r.rev,t.desc,[]).then((function(r){t.status="done",t.message="上传完成",i++,i===a&&(n.clear(),e.$dialog.alert({confirmButtonText:"继续上传",cancelButtonText:"返回",showCancelButton:!0,message:a+"个资源已经上传成功，管理员审核后方可被使用！",theme:"round-button"}).then((function(){e.filePreviewList=[]})).catch((function(){e.$router.back()})))}))}))}))}))}},computed:Object(s["a"])({},Object(o["c"])(["userInfo"]))},Me=Je,Ge=Object(L["a"])(Me,$e,je,!1,null,"f179e8f8",null),Be=Ge.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[n("transition",{staticStyle:{"padding-bottom":"80px"}},[n("keep-alive",[n("router-view")],1)],1),n("van-tabbar",{attrs:{"active-color":"#07c160","inactive-color":"#000","safe-area-inset-bottom":"","z-index":"4"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("van-tabbar-item",{attrs:{icon:"home-o",to:"/home"}},[e._v("工作台")]),n("van-tabbar-item",{attrs:{icon:"shopping-cart-o",badge:e.orderListSize,to:"/order"}},[e._v("素材车")]),n("van-tabbar-item",{attrs:{icon:"gem-o",to:"/square"}},[e._v("广场")]),n("van-tabbar-item",{attrs:{icon:"manager-o",to:"/mine"}},[e._v("我的")])],1)],1)},Ke=[],Xe={name:"Main.vue",data:function(){return{active:0}},methods:{onChange:function(e){this.index=e,this.currentJoyeaDesc=this.imagePreviewImages[parseInt(e)].joyeaDesc},resumeTab:function(){var e=this.$route.path;switch(e){case"/home":this.active=0;break;case"/order":this.active=1;break;case"/square":this.active=2;break;case"/mine":this.active=3;break}}},computed:Object(s["a"])({},Object(o["d"])({orderListSize:function(e){return e.orderList.length}}),{},Object(o["c"])(["userInfo"])),created:function(){this.resumeTab()}},qe=Xe,Qe=Object(L["a"])(qe,Ve,Ke,!1,null,"c2361482",null),Ye=Qe.exports,Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[e._m(0),n("div",{staticClass:"content"},[n("van-field",{attrs:{placeholder:"用户名","left-icon":"phone-o"},model:{value:e.loginForm.user,callback:function(t){e.$set(e.loginForm,"user",t)},expression:"loginForm.user"}}),n("van-field",{attrs:{placeholder:"密码","left-icon":"lock",type:"password",type:e.passwordType},model:{value:e.loginForm.pwd,callback:function(t){e.$set(e.loginForm,"pwd",t)},expression:"loginForm.pwd"}},[n("van-icon",{attrs:{slot:"right-icon",name:e.passwordIcon},on:{click:e.switchPasswordType},slot:"right-icon"})],1),n("div",{staticClass:"button-wrap"},[n("van-button",{attrs:{loading:e.loginLoading,size:"large",type:"info","loading-text":"登录中..."},on:{click:e.handleLogin}},[e._v(" 登录 ")])],1)],1)])},et=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("div",{staticClass:"logo"},[a("img",{attrs:{src:n("cf05"),alt:"default_logo"}})])])}],tt=(window.localStorage,{name:"Login",data:function(){return{loginLoading:!1,passwordType:"password",loginForm:{user:"",pwd:""}}},methods:Object(s["a"])({},Object(o["b"])(["updateUserInfoFunc"]),{switchPasswordType:function(){this.passwordType="password"===this.passwordType?"text":"password"},handleLogin:function(){var e=this;this.loginLoading=!0;var t=this;h(this.loginForm.user,btoa(this.loginForm.pwd)).then((function(n){2e3===n.code?(e.$notify({type:"success",message:"欢迎回来，"+n.data.userName+"！"}),t.updateUserInfoFunc({session:n.data["session"],name:n.data["userName"],email:e.loginForm.user}).then((function(){})),e.$router.replace({name:"/",params:{checked:!0}})):e.$notify({type:"danger",message:"登陆失败，请检查用户名密码！"})})).finally((function(){e.loginLoading=!1}))}}),computed:Object(s["a"])({passwordIcon:function(){return"password"===this.passwordType?"closed-eye":"eye"}},Object(o["c"])(["userInfo"])),created:function(){this.loginForm.user=this.userInfo.email}}),nt=tt,at=(n("90b3"),Object(L["a"])(nt,Ze,et,!1,null,"4286f992",null)),it=at.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"album"}},[e._l(e.albumList,(function(t){return n("van-swipe-cell",{key:t.path,scopedSlots:e._u([{key:"right",fn:function(){return[n("van-button",{staticClass:"delete-button",attrs:{square:"",text:t.shared?"取消分享":"分享",type:t.shared?"warning":"info"},on:{click:function(n){return e.handleShareAlbum(t)}}}),n("van-button",{staticClass:"delete-button",attrs:{square:"",text:"编辑",type:"primary"},on:{click:function(n){return e.handleEditAlbum(t)}}}),n("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(n){return e.handleDeleteAlbum(t)}}})]},proxy:!0}],null,!0)},[n("van-card",{staticStyle:{margin:"2px 0 2px 0"},attrs:{num:t.srcList.length,title:t.albumName,thumb:t.cover},on:{click:function(n){return e.handleShowAlbum(t)}}})],1)})),n("van-action-sheet",{attrs:{title:e.albumItem.albumName},model:{value:e.albumVisible,callback:function(t){e.albumVisible=t},expression:"albumVisible"}},[n("van-grid",{attrs:{border:"","column-num":3,gutter:5}},e._l(e.albumItem.srcList,(function(t){return n("van-grid-item",{on:{click:function(n){return e.handleGotoPreview(t)}}},[t.srcType.startsWith("image")?n("van-image",{staticClass:"my_icon my_preview_size",attrs:{src:e.genPreviewUrl(t.srcNeid,t.srcHash,t.srcRev,t.srcType)},on:{click:function(n){return e.handlePreview(t)}}}):t.srcType.startsWith("video")?n("van-image",{staticClass:"my_icon my_preview_size",attrs:{src:"video.png"},on:{click:function(n){return e.handlePreviewVideo(t)}}}):t.srcType.startsWith("doc")?n("van-image",{staticClass:"my_icon my_preview_size",attrs:{src:e.handleGetDocumentImage(t.srcType)},on:{click:function(n){return e.handlePreviewVideo(t)}}}):n("van-image",{staticClass:"my_icon my_preview_size",attrs:{src:"unknown.png"},on:{click:function(n){return e.handlePreview(t)}}}),n("div",{staticStyle:{width:"98%"}},[n("div",{staticStyle:{"font-size":"10px","-webkit-text-size-adjust":"none","word-break":"break-all"}},[e._v(" "+e._s(t.srcPath.substr(t.srcPath.lastIndexOf("/")+1))+" ")]),e._l(t.tags,(function(t){return n("van-tag",{attrs:{round:"",type:"success"}},[e._v(e._s(t.replace(e.markReg,"")))])}))],2)],1)})),1)],1)],2)},st=[],ot={name:"AlbumList",data:function(){return{albumVisible:!1,active:1,albumItem:{},albumList:[]}},methods:Object(s["a"])({handleGetDocumentImage:function(e){return W(e)}},Object(o["b"])(["clearFunc","addFunc","setOrderEditInfoFunc"]),{handleShareAlbum:function(e){var t=this;if(e.shared)g(e.albumId,!1).then((function(n){n.data&&(t.$notify({type:"success",message:"取消分享成功！"}),e.shared=!1)}));else{var n={name:"编辑分享",params:{albumId:e.albumId}};this.$router.replace(n)}},handleEditAlbum:function(e){var t=this;this.$dialog.confirm({title:"重新编辑提醒",message:"即将重新编辑清单【"+e.albumName+"】?"}).then((function(){t.clearFunc().then((function(){e.srcList.forEach((function(e){t.addFunc(A(e))})),t.setOrderEditInfoFunc({name:e.albumName,id:e.albumId}).then((function(){t.$router.push("/order")}))}))}))},handleDeleteAlbum:function(e){var t=this;this.$dialog.confirm({title:"删除提醒",message:"即将删除清单【"+e.albumName+"】?"}).then((function(){d({action:"album",method:"delete",album_id:e.albumId}).then((function(n){n.result&&(t.albumList=t.albumList.filter((function(t){return t.albumId!==e.albumId})),t.$notify({type:"success",message:"你的清单【"+e.albumName+"】已成功删除！"}))}))}))},handleGotoPreview:function(e){e.mime_type.startsWith("image")||this.handlePreview(e)},handlePreviewVideo:function(e){z(this,e,this.userInfo.session),event.stopPropagation()},handlePreview:function(e){N(this,this.albumItem.srcList,this.userInfo.session,e)},genPreviewUrl:function(e,t,n,a){var i="pic";return a.startsWith("doc")?i="doc":a.startsWith("video")&&(i="av"),E(e,t,n,i,this.userInfo.session)},handleShowAlbum:function(e){this.albumItem=e,this.albumVisible=!0},listAlbum:function(){var e=this,t="pic";v().then((function(n){e.albumList=[],n.data.forEach((function(n){n.srcList.forEach((function(n){n.url=E(n.srcNeid,n.srcHash,n.srcRev,t,e.userInfo.session)}));var a=n.srcList.filter((function(e){return e.srcType.startsWith("image")}));n.cover=a.length>0?a[0].url:"cover.png"})),e.albumList=n.data}))}}),computed:Object(s["a"])({},Object(o["c"])(["userInfo"])),created:function(){this.listAlbum()}},ct=ot,lt=Object(L["a"])(ct,rt,st,!1,null,"62a98eea",null),ut=lt.exports,dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},ht=[],mt={name:"AlbumDetail"},ft=mt,pt=Object(L["a"])(ft,dt,ht,!1,null,"20446b63",null),vt=pt.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"10px"}},[n("van-steps",{attrs:{active:e.active}},[n("van-step",[e._v("选清单")]),n("van-step",[e._v("配封面")]),n("van-step",[e._v("打标签")])],1),0===e.active?n("div",[0===e.myAlbumList.length?n("van-empty",{staticClass:"custom-image",attrs:{image:"https://img.yzcdn.cn/vant/custom-empty-image.png",description:"您暂时没有清单"}}):n("div",e._l(e.myAlbumList,(function(t,a){return n("van-cell",{attrs:{title:t.albumName},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-button",{attrs:{type:t.shared?"danger":"primary"},on:{click:function(n){return e.handleSelectShareAlbum(t)}}},[e._v(" "+e._s(t.shared?"取消分享":"编辑分享")+" ")])]},proxy:!0}],null,!0)})})),1)],1):1===e.active?n("div",[n("van-divider",{attrs:{"content-position":"left"}},[e._v("选择封面")]),0===this.editAlbum.srcList.filter((function(e){return e.local||e.srcType.startsWith("image")})).length?n("van-empty",{staticClass:"custom-image",attrs:{image:"https://img.yzcdn.cn/vant/custom-empty-image.png",description:"该清单中暂没有图片可做封面"}}):e._e(),n("van-grid",{attrs:{"column-num":3}},e._l(this.editAlbum.srcList.filter((function(e){return e.local||e.srcType.startsWith("image")})),(function(t,a){return n("van-grid-item",{key:t.id,staticStyle:{padding:"10px"},on:{click:function(n){return e.handleSelectCover(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!(a>=6&&e.onlySixPic),expression:"!(index >= 6 && onlySixPic)"}]},[t.local?n("img",{staticStyle:{width:"100%","max-height":"500px"},attrs:{src:t.url}}):n("img",{staticStyle:{width:"100%","max-height":"500px"},attrs:{src:e.genPreviewUrl(t.srcNeid,t.srcHash,t.srcRev,t.srcType)}}),t.local&&t.value===e.selectedLocalCoverId||t.srcNeid===e.selectedCoverNeid?n("div",{staticStyle:{position:"absolute",right:"5px",bottom:"5px"}},[n("van-icon",{attrs:{name:"success",color:"red"}})],1):e._e()])])})),1),n("van-button",{directives:[{name:"show",rawName:"v-show",value:e.onlySixPic&&this.editAlbum.srcList.filter((function(e){return e.local||e.srcType.startsWith("image")})).length>6,expression:"onlySixPic && this.editAlbum.srcList.filter(item => {return item.local || item.srcType.startsWith('image');}).length > 6"}],attrs:{type:"primary",block:""},on:{click:function(t){e.onlySixPic=!1}}},[e._v("显示全部封面 ")]),n("van-divider",{attrs:{"content-position":"left"}},[e._v("修改信息")]),n("van-cell-group",{scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticStyle:{color:"black","font-size":"16px"}},[e._v("清单名称")])]},proxy:!0}])},[n("van-field",{attrs:{type:"textarea",placeholder:"请填写清单名称"},model:{value:e.editAlbum.albumName,callback:function(t){e.$set(e.editAlbum,"albumName",t)},expression:"editAlbum.albumName"}}),n("div",{staticStyle:{padding:"2px 15px",color:"#8c939d","font-size":"0.5em"}},[e._v(" tips:时间+客户+出差/接待+产品"),n("br"),e._v(" 例:0829出差扬子江交流蓝芩口服液项目 ")])],1),n("br"),n("van-cell-group",{scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticStyle:{color:"black","font-size":"16px"}},[e._v("清单简介")])]},proxy:!0}])},[n("van-field",{attrs:{rows:"2",placeholder:"请填写清单简介",type:"textarea",maxlength:"200","show-word-limit":""},model:{value:e.editAlbum.shareDesc,callback:function(t){e.$set(e.editAlbum,"shareDesc",t)},expression:"editAlbum.shareDesc"}}),n("div",{staticStyle:{padding:"2px 15px",color:"#8c939d","font-size":"0.5em"}},[e._v(" tips:项目所处状态、背景、素材使用的目的"),n("br"),e._v(" 例:目前客户还在考虑四边封，了解到参与的同行有龙威，本次出差的目的是为了让客户掌握stick对比四边封的优势，同时给客户stick的标尺"),n("br")])],1),n("van-button",{attrs:{type:"danger",block:""},on:{click:function(t){e.active=0}}},[e._v("上一步")]),n("div",{staticStyle:{margin:"5px"}}),n("van-button",{attrs:{type:"primary",block:""},on:{click:function(t){return e.handleCompleteStepTwo()}}},[e._v("下一步")])],1):2===e.active?n("div",[n("van-cell-group",[n("van-cell",{attrs:{title:"行业"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:e.hangyeOption},model:{value:e.selectedHangyeId,callback:function(t){e.selectedHangyeId=t},expression:"selectedHangyeId"}})],1)]},proxy:!0}])}),n("van-cell",{attrs:{title:"剂型"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:e.jixingOption},model:{value:e.selectedJixingId,callback:function(t){e.selectedJixingId=t},expression:"selectedJixingId"}})],1)]},proxy:!0}])}),n("van-cell",{attrs:{title:"线别"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:e.xianbieOption},model:{value:e.selectedXianbieId,callback:function(t){e.selectedXianbieId=t},expression:"selectedXianbieId"}})],1)]},proxy:!0}])}),n("van-cell",{attrs:{title:"阶段"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:e.jieduanOption},model:{value:e.selectedJieduanId,callback:function(t){e.selectedJieduanId=t},expression:"selectedJieduanId"}})],1)]},proxy:!0}])}),n("van-cell",{attrs:{title:"市场"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:e.shichangOption},model:{value:e.selectedShichangId,callback:function(t){e.selectedShichangId=t},expression:"selectedShichangId"}})],1)]},proxy:!0}])})],1),n("van-button",{attrs:{type:"danger",block:""},on:{click:function(t){e.active=1}}},[e._v("上一步")]),n("div",{staticStyle:{margin:"5px"}}),n("van-button",{attrs:{type:"primary",block:""},on:{click:e.handleShareAlbum}},[e._v("立即分享")])],1):e._e()],1)},bt=[],yt={name:"EditShareAlbum",data:function(){return{collapseActiveName:"2",selectedHangyeId:-1,selectedXianbieId:-1,selectedJixingId:-1,selectedJieduanId:-1,selectedShichangId:-1,onlySixPic:!0,hangyeOption:xe,xianbieOption:ke,jixingOption:Ie,jieduanOption:Se,shichangOption:Pe,prepareCover:[],active:0,myAlbumList:[],selectedCoverNeid:"",selectedLocalCoverId:0,editAlbum:{},albumCoverOption:Le}},methods:{genPreviewUrl:function(e,t,n,a){var i="pic";return a.startsWith("doc")?i="doc":a.startsWith("video")&&(i="av"),E(e,t,n,i,this.userInfo.session)},handleListMineAlbum:function(){var e=this;v().then((function(t){e.myAlbumList=t.data;var n=e.$route.params.albumId;if(n){var a=e.myAlbumList.find((function(e){return e.albumId===n}));a&&e.handleSelectShareAlbum(a)}}))},handleSelectCover:function(e){e.local?(this.selectedCoverNeid="",this.selectedLocalCoverId=e.value):(this.selectedLocalCoverId=0,this.selectedCoverNeid=e.srcNeid)},handleCompleteStepTwo:function(){""!==this.selectedCoverNeid||0!==this.selectedLocalCoverId?0!==this.editAlbum.shareDesc.length&&0!==this.editAlbum.albumName.length?this.active=2:this.$notify({type:"danger",message:"请填写清单名称和简介!"}):this.$notify({type:"danger",message:"请先选择封面!"})},handleSelectShareAlbum:function(e){var t=this;e.shared?g(e.albumId,!1).then((function(n){n.data&&(t.$notify({type:"success",message:"取消分享成功！"}),e.shared=!1)})):(e.shareDesc||(e.shareDesc=""),this.albumCoverOption.forEach((function(t){t.local=!0,e.srcList.push(t)})),console.log(e),this.editAlbum=e,this.selectedCoverNeid="",this.active=1)},handleShareAlbum:function(){var e=this;-1!==this.selectedHangyeId&&-1!==this.selectedXianbieId&&-1!==this.selectedJixingId&&-1!==this.selectedJieduanId&&-1!==this.selectedShichangId?g(this.editAlbum.albumId,!0,this.editAlbum.albumName,this.selectedCoverNeid,this.selectedLocalCoverId,this.editAlbum.shareDesc,this.selectedHangyeId,this.selectedXianbieId,this.selectedJixingId,this.selectedJieduanId,this.selectedShichangId).then((function(t){t.data&&(e.$notify({type:"success",message:"分享成功！"}),e.$router.back())})):this.$notify({type:"danger",message:"请打完标签再分享哦!"})},handleResetForm:function(){this.active=0,this.editAlbum={}}},computed:Object(s["a"])({},Object(o["c"])(["userInfo"])),created:function(){this.handleResetForm(),this.handleListMineAlbum()}},_t=yt,wt=Object(L["a"])(_t,gt,bt,!1,null,"5179c270",null),xt=wt.exports,kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.recordList,(function(t){return n("van-card",{on:{click:function(n){return e.handleGotoPan(t)}},scopedSlots:e._u([{key:"thumb",fn:function(){return[t.srcType.startsWith("image")?n("van-image",{attrs:{width:"80",height:"80",src:e.getPreviewUrl(t)}}):n("van-image",{attrs:{width:"80",height:"80",src:e.getDocumentImage(t.srcType)}})]},proxy:!0},{key:"tags",fn:function(){return[t.checkedAt?e._e():n("van-tag",{attrs:{type:"primary"}},[e._v("待审核")]),t.checkedAt&&t.checked?n("van-tag",{attrs:{type:"success"}},[e._v("通过")]):e._e(),t.checkedAt&&!t.checked?n("van-tag",{attrs:{type:"danger"}},[e._v("未通过")]):e._e(),t.checkedAt&&t.checked?n("div",[e._v(" 管理员移至:"+e._s(t.uploadPath.replace("/营销素材展示","首页")+"/"+t.srcName)+" ")]):e._e(),t.checkedAt&&!t.checked?n("div",[e._v("审核意见:"+e._s(t.refuseReason))]):e._e(),n("div",[e._v("上传时间:"+e._s(t.createdAt))])]},proxy:!0}],null,!0)})})),1)},It=[],St={name:"MyUpload",data:function(){return{recordList:[]}},methods:{getDocumentImage:W,handleGotoPan:function(e){e.checkedAt&&e.checked},getMyUploadRecord:function(){var e=this;_().then((function(t){console.log(t),e.recordList=t.data}))},getPreviewUrl:function(e){var t="pic";return e.srcType.startsWith("doc")?t="doc":e.srcType.startsWith("video")&&(t="av"),E(e.srcNeid,e.srcHash,e.srcRev,t,this.userInfo.session)}},computed:Object(s["a"])({},Object(o["c"])(["userInfo"])),created:function(){this.getMyUploadRecord()}},Pt=St,Lt=Object(L["a"])(Pt,kt,It,!1,null,"6a3cc408",null),Ct=Lt.exports,Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("van-cell-group",[n("van-field",{attrs:{label:"原密码",type:"password",placeholder:"请输入原密码"},model:{value:e.curPwd,callback:function(t){e.curPwd=t},expression:"curPwd"}})],1),n("br"),n("van-cell-group",[n("van-field",{attrs:{label:"新密码",type:"password",placeholder:"请输入新密码"},model:{value:e.newPwd,callback:function(t){e.newPwd=t},expression:"newPwd"}}),n("van-field",{attrs:{label:"确认新密码",type:"password",placeholder:"请确认新密码"},model:{value:e.newPwdConfirm,callback:function(t){e.newPwdConfirm=t},expression:"newPwdConfirm"}})],1),n("br"),n("van-button",{staticStyle:{padding:"10px"},attrs:{type:"primary",block:""},on:{click:e.handleChangePwd}},[e._v("修改密码")])],1)},Dt=[],Tt={name:"ChangePwd",data:function(){return{curPwd:"",newPwd:"",newPwdConfirm:""}},methods:Object(s["a"])({},Object(o["b"])(["clearUserSessionFunc"]),{handleChangePwd:function(){var e=this;this.newPwd===this.newPwdConfirm?this.newPwd.length<6?this.$notify("请确保密码长度大于6位！"):this.newPwd!==this.curPwd?x(this.curPwd,this.newPwd).then((function(t){t.data?e.$dialog.alert({confirmButtonText:"重新登陆",showCancelButton:!1,message:"密码修改成功",theme:"round-button"}).then((function(){m().then((function(t){e.clearUserSessionFunc().then((function(){e.$router.push("/login")}))}))})):e.$notify("密码修改错误，请确保原密码正确！")})):this.$notify("请确认新密码和旧密码不一致！"):this.$notify("请确认输入的新密码一致！")}})},$t=Tt,jt=Object(L["a"])($t,Ot,Dt,!1,null,"1eb8616a",null),At=jt.exports;a["default"].use(D["a"]);var Nt=new D["a"]({base:"mobile",routes:[{path:"/login",name:"仅一素材库系统登陆",component:it},{path:"/",redirect:"/home",name:"/",component:Ye,children:[{path:"home",name:"仅一素材库系统",component:Z,meta:{allowBack:!1,allowHome:!1}},{path:"order",name:"素材车",component:re,meta:{allowHome:!1}},{path:"square",name:"广场",component:Te,meta:{allowHome:!1}},{path:"mine",name:"我的",component:me,meta:{allowHome:!1}},{path:"/search",name:"搜索结果",component:ye,meta:{allowBack:!0,allowHome:!1}}]},{path:"/album",name:"我的清单",component:ut,meta:{allowBack:!0,allowHome:!0}},{path:"/albumDetail",name:"清单详情",component:vt,meta:{allowBack:!0,allowHome:!0}},{path:"/editShare",name:"编辑分享",component:xt,meta:{allowBack:!0,allowHome:!0}},{path:"/upload/index",name:"素材上传",component:Be,meta:{allowBack:!0,allowHome:!0}},{path:"/select/dir",name:"目录选择",component:He,meta:{allowBack:!0,allowHome:!0}},{path:"/upload/mime",name:"我的上传",component:Ct,meta:{allowBack:!0,allowHome:!0}},{path:"/user/changePwd",name:"修改密码",component:At,meta:{allowBack:!0,allowHome:!0}}],linkActiveClass:"mui-active"});n("3a34");a["default"].config.productionTip=!1,a["default"].prototype.$fileName=J,a["default"].use(T["a"]),a["default"].use(D["a"]);var Et=new a["default"]({});t["default"]=Et;new a["default"]({store:I,router:Nt,render:function(e){return e(O)}}).$mount("#app")},"85ec":function(e,t,n){},"90b3":function(e,t,n){"use strict";var a=n("bb8a"),i=n.n(a);i.a},a2bd:function(e,t,n){},afe3:function(e,t,n){"use strict";var a=n("124a"),i=n.n(a);i.a},bb8a:function(e,t,n){},bfbb:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"}});